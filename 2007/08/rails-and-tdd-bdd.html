<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Rails and TDD/BDD &#8211; geek!daily</title>
<meta name="description" content="I'm going to limit this post to my notes on the excellent learnings from the day of many testing talks at Rails Edge Chicago and follow up with another post for my addle-pated musings thereupon.

">
<meta name="keywords" content="">



<!-- Twitter Cards -->
<meta name="twitter:title" content="Rails and TDD/BDD">
<meta name="twitter:description" content="I'm going to limit this post to my notes on the excellent learnings from the day of many testing talks at Rails Edge Chicago and follow up with another post for my addle-pated musings thereupon.

">
<meta name="twitter:site" content="@purp">
<meta name="twitter:creator" content="@purp">

<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://localhost:4000/images/site-logo.png">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Rails and TDD/BDD">
<meta property="og:description" content="I'm going to limit this post to my notes on the excellent learnings from the day of many testing talks at Rails Edge Chicago and follow up with another post for my addle-pated musings thereupon.

">
<meta property="og:url" content="http://localhost:4000/2007/08/rails-and-tdd-bdd.html">
<meta property="og:site_name" content="geek!daily">





<link rel="canonical" href="http://localhost:4000/2007/08/rails-and-tdd-bdd.html">
<link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="geek!daily Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/main.css">
<!-- Webfonts -->
<script src="//use.edgefonts.net/source-sans-pro:n2,i2,n3,i3,n4,i4,n6,i6,n7,i7,n9,i9;source-code-pro:n4,n7;volkhov.js"></script>

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
  <script src="http://localhost:4000/assets/js/vendor/html5shiv.min.js"></script>
  <script src="http://localhost:4000/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="http://localhost:4000/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://localhost:4000/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://localhost:4000/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://localhost:4000/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body id="post">

<div class="navigation-wrapper">
	<nav role="navigation" id="site-nav" class="animated drop">
	    <ul>
      
		    
		        
		    
		    <li><a href="http://localhost:4000/" >Home</a></li>
		  
		    
		        
		    
		    <li><a href="http://localhost:4000/articles/" >Articles</a></li>
		  
		    
		        
		    
		    <li><a href="http://localhost:4000/projects/" >Projects</a></li>
		  
		    
		        
		    
		    <li><a href="http://localhost:4000/blog/" >Blog</a></li>
		  
		    
		        
		    
		    <li><a href="http://localhost:4000/about/" >About</a></li>
		  
	    </ul>
	</nav>
</div><!-- /.navigation-wrapper -->

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->

<header class="masthead">
	<div class="wrap">
      
  		<a href="http://localhost:4000/" class="site-logo" rel="home" title="geek!daily"><img src="http://localhost:4000/images/site-logo.png" width="200" height="200" alt="geek!daily logo" class="animated fadeInDown"></a>
      
      <h1 class="site-title animated fadeIn"><a href="http://localhost:4000/">geek!daily</a></h1>
		<h2 class="site-description animated fadeIn" itemprop="description">sporadic bursts of random thinking on life, leadership, and tech</h2>
	</div>
</header><!-- /.masthead -->

<div class="js-menu-screen menu-screen"></div>


<div id="main" role="main">
  <article class="hentry">
    
    <div class="entry-wrapper">
      <header class="entry-header">
        <span class="entry-tags"></span>
        
          <h1 class="entry-title">Rails and TDD/BDD</h1>
        
      </header>
      <footer class="entry-meta">
        
        
        
          <img src="http://localhost:4000/images/jim_meyer_headshot.jpg" class="bio-photo" alt="Jim Meyer bio photo"></a>
        
        <span class="author vcard">By <span class="fn">Jim Meyer</span></span>
        <span class="entry-date date published"><time datetime="2007-08-24T00:00:00-07:00"><i class="fa fa-calendar-o"></i> August 24, 2007</time></span>
        
        
        
        
      </footer>
      <div class="entry-content">
        <p><em>I'm going to limit this post to my notes on the excellent learnings from the day of many testing talks at Rails Edge Chicago and follow up with another post for my addle-pated musings thereupon.</em></p>

<p>First I'd like to observe that <strong>Rails benefits heavily by the fact that Railers care passionately about BDD</strong>, coverage testing, seeking complete coverage, and beautiful, elegant code. In the past month at various Rails and non-Rails conferences, I've heard it hammered over and over again in many ways:</p>

<ul><li>You've got to have 100% coverage; anything less is uncertainty.</li>

<li>It's better to submit a test with no patch than a patch with no test.</li>

<li>I pretty much don't accept patches without a test.</li></ul>

<p>...and many more. This shared mindset results in a community of developers who not only bring an ethic of constant improvement but also who seek to make code ownership irrelevant. More on that in the Conclusions.</p>



<p><strong>Watching <a href="http://onestepback.org/">Jim Weirich</a> do BDD was a religious experience.</strong> His talk was titled, &quot;Red, Green, Refactor&quot; which is the concise expression of his process: make a failing test, make the test pass, then do it again. He just sat down and started making tests, then writing just enough code to satisfy the test. It was design on the fly, iteratively building up the model in small increments, testing, and again; part of my joy from this was to watch as an excellent programmer exposed his process, even to the point of incorporating feedback from the room. His rake task for testing tracks the number of times it's been called. If his talk is to be believed, he does it like this every day. And I believe. </p>

<p>Incidentally, <strong>Jim writes monster-long test names</strong> like &quot;test_portfolio_with_one_stock_has_value_same_as_stock_value&quot; <strong>to make his intent instantly readable.</strong> His point is that you're only going to type this name once, so don't let a desire for &quot;manageable&quot; method names get in the way of expressive, semantic naming.</p>

<p>And he made me realize how cool flexmock is: <tt>flex_mock_obj.should_receive(:quote).times(3).and_return(4,30,100)</tt></p>

<p><strong><a href="http://relevancellc.com/">Justin Gehtland</a> and <a href="http://relevancellc.com/">Stuart Halloway</a> are awesome presenters</strong> and it's easy to see they enjoy working together. They're BDD practitioners and advocates of it and it was a pleasure to hear them talk.</p>

<p><strong><a href="http://blog.davidchelimsky.net/">David Chelimsky</a></strong> is the lead developer of <a href="http://rspec.rubyforge.org/">RSpec</a>, a very thoughtful person (as in &quot;he thinks often and well&quot;, though I'm sure he's also kind =), and a vicious Werewolf waiting to happen. He did a half-hour speed talk about RSpec, which I'd only just heard about three weeks ago when talking to <a href="http://eastmedia.com/">Matt Pelletier</a> and again a couple of weeks ago at <a href="http://rubyhoedown2007.confreaks.com/session01.html">Ruby Hoedown</a>. The general idea is you define your spec in a domain-specific language (DSL) which can then be executed to demonstrate that you meet spec. This was already on my list, but David's moved it up quite a lot. He left me with some research:</p>

<ul><li><a href="http://dannorth.net/2007/06/introducing-rbehave"><strong>RBehave</strong></a>: story level behavior testing</li>

<li><a href="http://blog.labnotes.org/2006/09/04/assert_select-cheat-sheet/"><strong>assert_select</strong></a>: find CSS items in page and assert about them.</li>

<li><strong><a href="http://dev.thefrontside.net/crosscheck/wiki/Overview">CrossCheck</a></strong>: java tool that emulates popular browsers to test your Javascript &quot;in browser&quot;</li>

<li><strong><a href="http://www.zenspider.com/ZSS/Products/ZenTest/">ZenTest/AutoTest</a></strong>: test like mad</li>

<li><strong><a href="http://blog.codefront.net/2007/04/01/get-your-testing-results-via-growl-notifications/">Test Notifications via Growl</a></strong>: combined with AutoTest, you can just watch things start working as you fix tests. Cool!</li></ul>

<p>He also gave me reading: <strong><a href="http://domaindrivendesign.org/">Domain Driven Design</a></strong>, by Eric Evans.</p>



<p><strong><a href="http://www.elevatedrails.com/">Mike Mangino</a>'s</strong> talk, &quot;Testing for the Real World&quot;, made some excellent points:</p>

<ol><li>Fast tests get run.</li>

<li>Slow tests don't.</li>

<li>The only tests that help are the ones that get run.</li></ol>

<p>Actually, <strong>his talk seemed like a barrage of excellent points</strong> in retrospect; I ended up with a bunch of concise snippets in my notes which I'll try to reconstitute into full explanations here. Apologies to Mike if I screw it up and libel his abilities; you should assume any errors are in my understanding or ability to explain the concept.</p>

<p><strong>Fixtures don't scale well for large quantities of data,</strong> so if you're testing against a lot of data you're best not using them. However, they're alway useful as templates for test objects; for example, if you're going to do a bunch of tests which all use the same data with only slight variations (testing each of many validators, &amp;c) it can be handy to get the original object from a fixture and tweak it to suit your test.</p>

<p>Mocking can reveal the ugly spots when testing a controller. For example, if you find you need to mock a phonebook object to return an entry, an entry object to return a name, and a name object to return a last name ... you've got issues in the code. In fact, it's a good generalization that <strong>hard-to-test code very likely needs refactoring</strong>.</p>

<p>Meanwhile, it's much easier to generate tests for views and controllers if you do them separately. Particularly, Mike recommends mocking helpers in view tests and testing the helpers separately. </p>

<p>Mike finally said the right words to make the difference between stubbing and mocking stick for me (yeah, I may be dumb but I'm slow). <strong>If the return value is important to the bit you're testing, mock it; otherwise, stub it.</strong> He also mentioned that filters are hard to stub, but I didn't catch an explanation so I'll have to learn why on my own.</p>

<p>One of the best snippets: <strong>Tests should be informative first, DRY second</strong>. You want people who read your tests to instantly get it, not have to slog through various helper functions to figure out what's going on.</p>

<p>Oh, and more research: <a href="http://cruisecontrol.sourceforge.net/">CruiseControl</a>, a continuous build/integration tool based on the work of <a href="http://www.martinfowler.com">Martin Fowler</a> and <a href="http://blog.foemmel.com/">Matthew Foemmel.</a> When I tried to have a look at the <a href="http://cruisecontrolrb.thoughtworks.com/">Ruby/Rails version</a> is seemed the server was not responding.</p>

<p>Hey, Technorati! Get this: <a href="http://technorati.com/tag/therailsedge" rel="tag">therailsedge</a> <a href="http://technorati.com/tag/railsedge" rel="tag">railsedge</a> <a href="http://technorati.com/tag/railsedge2007" rel="tag">railsedge2007</a></p>


        
      </div><!-- /.entry-content -->
    </div><!-- /.entry-wrapper -->
    <nav class="pagination" role="navigation">
      
        <a href="http://localhost:4000/2007/08/scripting-news-for-8-22-07-scripting-news-annex.html" class="btn" title="Scripting News for 8/22/07 Â« Scripting News Annex">Previous</a>
      
      
        <a href="http://localhost:4000/2007/08/context-aware-image-re-sizing.html" class="btn" title="Context Aware Image Re-Sizing">Next</a>
      
    </nav><!-- /.pagination -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo" class="entry-wrapper">
    

<span>&copy; 2015 Jim Meyer. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="http://mademistakes.com/so-simple/" rel="nofollow">So Simple Theme</a>.</span>
<div class="social-icons">
	<a href="http://twitter.com/purp" title="Jim Meyer on Twitter" target="_blank"><i class="fa fa-twitter-square fa-2x"></i></a>
	
	
	<a href="http://linkedin.com/in/jimmeyer" title="Jim Meyer on LinkedIn" target="_blank"><i class="fa fa-linkedin-square fa-2x"></i></a>
	
	<a href="http://instagram.com/purp" title="Jim Meyer on Instagram" target="_blank"><i class="fa fa-instagram fa-2x"></i></a>
	<a href="http://www.flickr.com/photos/purp" title="Jim Meyer on Flickr" target="_blank"><i class="fa fa-flickr fa-2x"></i></a>
	<a href="http://github.com/purp" title="Jim Meyer on Github" target="_blank"><i class="fa fa-github-square fa-2x"></i></a>
	
	
  <a href="http://localhost:4000/feed.xml" title="Atom/RSS feed"><i class="fa fa-rss-square fa-2x"></i></a>
</div><!-- /.social-icons -->
  </footer>
</div><!-- /.footer-wrapper -->

<script type="text/javascript">
  var BASE_URL = 'http://localhost:4000';
</script>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://localhost:4000/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://localhost:4000/assets/js/scripts.min.js"></script>




</body>
</html>
