<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Digging It Up with Dave Thomas &#8211; geek!daily</title>
<meta name="description" content="mental note: I should liveblog like Giles did. His terse notes are incredibly readable. I don't know that my additional pass does anything but delay getting it out there.

">
<meta name="keywords" content="">



<!-- Twitter Cards -->
<meta name="twitter:title" content="Digging It Up with Dave Thomas">
<meta name="twitter:description" content="mental note: I should liveblog like Giles did. His terse notes are incredibly readable. I don't know that my additional pass does anything but delay getting it out there.

">
<meta name="twitter:site" content="@purp">
<meta name="twitter:creator" content="@purp">

<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://blog.geekdaily.org/images/site-logo.png">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Digging It Up with Dave Thomas">
<meta property="og:description" content="mental note: I should liveblog like Giles did. His terse notes are incredibly readable. I don't know that my additional pass does anything but delay getting it out there.

">
<meta property="og:url" content="http://blog.geekdaily.org/2007/08/digging-it-up-with-dave-thomas.html">
<meta property="og:site_name" content="geek!daily">





<link rel="canonical" href="http://blog.geekdaily.org/2007/08/digging-it-up-with-dave-thomas.html">
<link href="http://blog.geekdaily.org/feed.xml" type="application/atom+xml" rel="alternate" title="geek!daily Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://blog.geekdaily.org/assets/css/main.css">
<!-- Webfonts -->
<script src="//use.edgefonts.net/source-sans-pro:n2,i2,n3,i3,n4,i4,n6,i6,n7,i7,n9,i9;source-code-pro:n4,n7;volkhov.js"></script>

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
  <script src="http://blog.geekdaily.org/assets/js/vendor/html5shiv.min.js"></script>
  <script src="http://blog.geekdaily.org/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="http://blog.geekdaily.org/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://blog.geekdaily.org/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://blog.geekdaily.org/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://blog.geekdaily.org/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://blog.geekdaily.org/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://blog.geekdaily.org/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://blog.geekdaily.org/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body id="post">

<div class="navigation-wrapper">
	<nav role="navigation" id="site-nav" class="animated drop">
	    <ul>
      
		    
		        
		    
		    <li><a href="http://blog.geekdaily.org/" >Home</a></li>
		  
		    
		        
		    
		    <li><a href="http://blog.geekdaily.org/articles/" >Articles</a></li>
		  
		    
		        
		    
		    <li><a href="http://blog.geekdaily.org/projects/" >Projects</a></li>
		  
		    
		        
		    
		    <li><a href="http://blog.geekdaily.org/blog/" >Blog</a></li>
		  
		    
		        
		    
		    <li><a href="http://blog.geekdaily.org/about/" >About</a></li>
		  
	    </ul>
	</nav>
</div><!-- /.navigation-wrapper -->

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->

<header class="masthead">
	<div class="wrap">
      
  		<a href="http://blog.geekdaily.org/" class="site-logo" rel="home" title="geek!daily"><img src="http://blog.geekdaily.org/images/site-logo.png" width="200" height="200" alt="geek!daily logo" class="animated fadeInDown"></a>
      
      <h1 class="site-title animated fadeIn"><a href="http://blog.geekdaily.org/">geek!daily</a></h1>
		<h2 class="site-description animated fadeIn" itemprop="description">sporadic bursts of random thinking on life, leadership, and tech</h2>
	</div>
</header><!-- /.masthead -->

<div class="js-menu-screen menu-screen"></div>


<div id="main" role="main">
  <article class="hentry">
    
    <div class="entry-wrapper">
      <header class="entry-header">
        <span class="entry-tags"></span>
        
          <h1 class="entry-title">Digging It Up with Dave Thomas</h1>
        
      </header>
      <footer class="entry-meta">
        
        
        
          <img src="http://blog.geekdaily.org/images/jim_meyer_headshot.jpg" class="bio-photo" alt="Jim Meyer bio photo"></a>
        
        <span class="author vcard">By <span class="fn">Jim Meyer</span></span>
        <span class="entry-date date published"><time datetime="2007-08-27T00:00:00-07:00"><i class="fa fa-calendar-o"></i> August 27, 2007</time></span>
        
        
        
        
      </footer>
      <div class="entry-content">
        <p><em>mental note: I should liveblog like <a href="http://gilesbowkett.blogspot.com/2007/08/dave-thomas-rails-treasures-notes.html">Giles</a> did. His terse notes are incredibly readable. I don't know that my additional pass does anything but delay getting it out there.</em></p>

<p>One of the most, if not <em>the</em> most, information-dense presentation was <a href="http://pragmaticstudio.com">Dave Thomas</a>' &quot;Buried Treasures: Hidden Rails Tips.&quot; It's a bit of a misnomer; some of the best learning I had was about TextMate</p>

<p><em>PLEASE NOTE: the code below is pseudocode only. It will not run. If you try to run this code, it will likely cause all of your pet's hair to fall out.</em> </p>

<p><strong>with_scope</strong></p>

<p>Apply scoping conditions, etc., to ActiveRecord finds. Two interesting ways to call this:</p>

<p><tt>with_scope.(:find =&gt; {:readonly =&gt; true}, :create =&gt; {...}, :conditions, :order, :limit )</tt></p>

<p>... or ...</p>

<p><tt></tt></p>

<pre>LimitNotExceeded = {:conditions =&gt; '...', ...}<br />NotExpired = {:conditions =&gt; '...', ...}<br /><br />with_scope(LimitNotExceeded) do<br />&nbsp; with_scope(NotExpired) do<br />&nbsp; &nbsp; find(:all)<br />&nbsp; end<br />end</pre>

<p><strong>with_options</strong></p>

<p>
Great for DRYing up your routes file (<a href="http://weblog.jamisbuck.org/2007/1/24/object-with_options">Jamis Buck agrees</a>), <strong>but as it's available on all Ruby objects you</strong> could use this to factor out repeated options in any block of code.

</p>

<p><strong>returning</strong></p>

<p>This is awesome. Change this crappy construction:</p>

<pre>def badly_coded(foo)<br />&nbsp; status = foo.do_that_thing(:with_that_stuff)<br />&nbsp; unless status<br />&nbsp; &nbsp; unless status = foo.do_some_recovery_thing<br />&nbsp; &nbsp;&nbsp; &nbsp;logger.warning(&quot;That didn't go right ...&quot;)<br />&nbsp; &nbsp; end<br />&nbsp; end<br />&nbsp; status<br />end</pre>

<p>... to this nifty, readable one:</p>

<pre>def shiny_shiny(foo)<br />&nbsp; returning foo.do_that_thing(:with_that_stuff) do |status|<br />&nbsp; &nbsp; unless status = foo.do_some_recovery_thing<br />&nbsp; &nbsp;&nbsp; &nbsp;logger.warning(&quot;That didn't go right ...&quot;)<br />&nbsp; &nbsp; end<br />&nbsp; end<br />end</pre>

<p><strong>each_with_index</strong></p>

<p>Yeah, everyone but me knew about this one, but it's one I've wished for in Perl <del>and Python</del> so it's nice to have tripped over it in passing. [As <a href="http://www.bigasterisk.com/">Drew</a> points out in the comments, Python has a form of this.]</p>

<p><strong>Lookup Constants</strong></p>

<p>I have a cryptic note &quot;Use them for compile time caching&quot; and I don't have the slides handy so I can't decrypt right now.</p>

<p><strong>Don't Call Models in Migrations</strong></p>
<p>IIRC, this came from a quick side discussion: to avoid the race condition where a model column you need to manipulate might not exist in the database quite yet, you should recreate the model object in the migration rather than call it through ActiveRecord. This bit me a while back and I hacked around it with far less grace.</p>

<p><strong>Date Formats</strong></p>
<p>There are some built-ins:</p>
<pre>Time.now.to_s(:db)<br />Time.now.to_s(:short)<br />Time.now.to_s(:long)<br />Time.now.to_s(:rfc822)</pre>

<p>You can add your own:</p>

<pre>Time::DATE_FORMATS.merge!(:timestamp =&gt; '%Y%m%d.%H%M%S')<br />Time.now.to_s(:timestamp)<br />=&gt; &quot;20070827.122334&quot;</pre>

<p>You should never need strftime again. =]</p>

<p>BTW, <tt>(now..then).to_s(:db)</tt> makes a proper BETWEEN clause. Sweet!

</p>

<p><strong>Partitioning Groups: group_by</strong></p>
<pre>&gt;&gt; (1..20).group_by {|n| n % 3}<br />=&gt; {0=&gt;[3, 6, 9, 12, 15, 18], 1=&gt;[1, 4, 7, 10, 13, 16, 19], 2=&gt;[2, 5, 8, 11, 14, 17, 20]}</pre>

<p>Related are <tt>index_by</tt> and <tt>in_groups_of</tt>.</p>

<p><strong>Groovy String Tricks</strong></p>
<pre>str = &quot;Ruby on Rails&quot;<br />str.at(3)<br />str.from()<br />str.to()<br />str.first()<br />str.last()<br />str.each_char {...}<br /><br />%w{Foo Bar Baz}.to_sentence(:connector =&gt; 'and also')</pre>

<p><strong>generate + svn</strong></p>
<p>Don't forget to add/remove your generated bits again.</p>
<pre>script/generate model foo --svn<br />script/destroy model foo --svn</pre>

<p><strong>Groovy console Tricks</strong></p>
<p>You can create a custom .irbrc file to preserve command history, etc. Dave said he'd post his; until then, here's <a href="http://romeda.org/blog/2006/11/irbrc.html">Blaine Cook's</a>, an <a href="http://drnicwilliams.com/2006/10/12/my-irbrc-for-consoleirb/">exploded view of Dr. Nic's</a>, and <a href="http://redhanded.hobix.com/inspect/stickItInYourIrbrcMethodfinder.html">a clever method finder to pop into your .irbrc</a> [<a href="http://www.whytheluckystiff.net/ruby/what.irbrc">irbrc file</a>]</p>

<p>Good to remember that you have an instance of the integration testing ApplicationController as &quot;app&quot;. Mike Clark <a href="http://clarkware.com/cgi/blosxom/2006/04/04">blogged a bit about this</a> last year. Handy.</p>

<p>A headslapper, in retrospect: you can call <tt>irb SomeClass</tt> or <tt>irb my_object</tt> to invoke a subsession inside the scope of that class or instantiated object. I think I've got that right.</p>

<p>And reinforcing <a href="http://gilesbowkett.blogspot.com/2007/08/evil-rails-console-gotcha-reload.html">Giles' observations</a>, <tt>reload!</tt> is handy to for getting your code changes into your current console, but it doesn't reload instantiated objects ... so it may not net out. Still, good tool to have handy.</p>

<p><em><strong>I'm going to leave out the TextMate shortcuts as I've spent too long on this post already. I mentioned this was info-dense, right? <tt>;]</tt></strong></em></p>


<p>Hey Technorati! Get this: <a href="http://technorati.com/tag/therailsedge" rel="tag">therailsedge</a> <a href="http://technorati.com/tag/railsedge" rel="tag">railsedge</a> <a href="http://technorati.com/tag/railsedge2007" rel="tag">railsedge2007</a> </p>


        
      </div><!-- /.entry-content -->
    </div><!-- /.entry-wrapper -->
    <nav class="pagination" role="navigation">
      
        <a href="http://blog.geekdaily.org/2007/08/context-aware-image-re-sizing.html" class="btn" title="Context Aware Image Re-Sizing">Previous</a>
      
      
        <a href="http://blog.geekdaily.org/2007/08/live-nude-code-.html" class="btn" title="Live! Nude! Code!">Next</a>
      
    </nav><!-- /.pagination -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo" class="entry-wrapper">
    

<span>&copy; 2015 Jim Meyer. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="http://mademistakes.com/so-simple/" rel="nofollow">So Simple Theme</a>.</span>
<div class="social-icons">
	<a href="http://twitter.com/purp" title="Jim Meyer on Twitter" target="_blank"><i class="fa fa-twitter-square fa-2x"></i></a>
	
	
	<a href="http://linkedin.com/in/jimmeyer" title="Jim Meyer on LinkedIn" target="_blank"><i class="fa fa-linkedin-square fa-2x"></i></a>
	
	<a href="http://instagram.com/purp" title="Jim Meyer on Instagram" target="_blank"><i class="fa fa-instagram fa-2x"></i></a>
	<a href="http://www.flickr.com/photos/purp" title="Jim Meyer on Flickr" target="_blank"><i class="fa fa-flickr fa-2x"></i></a>
	<a href="http://github.com/purp" title="Jim Meyer on Github" target="_blank"><i class="fa fa-github-square fa-2x"></i></a>
	
	
  <a href="http://blog.geekdaily.org/feed.xml" title="Atom/RSS feed"><i class="fa fa-rss-square fa-2x"></i></a>
</div><!-- /.social-icons -->
  </footer>
</div><!-- /.footer-wrapper -->

<script type="text/javascript">
  var BASE_URL = 'http://blog.geekdaily.org';
</script>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://blog.geekdaily.org/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://blog.geekdaily.org/assets/js/scripts.min.js"></script>




</body>
</html>
