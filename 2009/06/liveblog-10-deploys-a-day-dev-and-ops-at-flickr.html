<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>LiveBlog: 10+ Deploys A Day: Dev and Ops at Flickr &#8211; geek!daily</title>
<meta name="description" content="Update 1: Slides are now on SlideShare.

">
<meta name="keywords" content="">

  

<!-- Twitter Cards -->
<meta name="twitter:title" content="LiveBlog: 10+ Deploys A Day: Dev and Ops at Flickr">
<meta name="twitter:description" content="Update 1: Slides are now on SlideShare.

">
<meta name="twitter:site" content="@purp">


<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://blog.geekdaily.org/images/site-logo.png">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="LiveBlog: 10+ Deploys A Day: Dev and Ops at Flickr">
<meta property="og:description" content="Update 1: Slides are now on SlideShare.

">
<meta property="og:url" content="http://blog.geekdaily.org/2009/06/liveblog-10-deploys-a-day-dev-and-ops-at-flickr.html">
<meta property="og:site_name" content="geek!daily">





<link rel="canonical" href="http://blog.geekdaily.org/2009/06/liveblog-10-deploys-a-day-dev-and-ops-at-flickr.html">
<link href="http://blog.geekdaily.org/feed.xml" type="application/atom+xml" rel="alternate" title="geek!daily Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://blog.geekdaily.org/assets/css/main.css">
<!-- Webfonts -->
<script src="//use.edgefonts.net/source-sans-pro:n2,i2,n3,i3,n4,i4,n6,i6,n7,i7,n9,i9;source-code-pro:n4,n7;volkhov.js"></script>

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
  <script src="http://blog.geekdaily.org/assets/js/vendor/html5shiv.min.js"></script>
  <script src="http://blog.geekdaily.org/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="http://blog.geekdaily.org/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://blog.geekdaily.org/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://blog.geekdaily.org/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://blog.geekdaily.org/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://blog.geekdaily.org/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://blog.geekdaily.org/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://blog.geekdaily.org/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body id="post">

<div class="navigation-wrapper">
	<nav role="navigation" id="site-nav" class="animated drop">
	    <ul>
      
		    
		        
		    
		    <li><a href="http://blog.geekdaily.org/" >Home</a></li>
		  
		    
		        
		    
		    <li><a href="http://blog.geekdaily.org/articles/" >Articles</a></li>
		  
		    
		        
		    
		    <li><a href="http://blog.geekdaily.org/projects/" >Projects</a></li>
		  
		    
		        
		    
		    <li><a href="http://blog.geekdaily.org/blog/" >Blog</a></li>
		  
		    
		        
		    
		    <li><a href="http://blog.geekdaily.org/about/" >About</a></li>
		  
	    </ul>
	</nav>
</div><!-- /.navigation-wrapper -->

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->

<header class="masthead">
	<div class="wrap">
      
  		<a href="http://blog.geekdaily.org/" class="site-logo" rel="home" title="geek!daily"><img src="http://blog.geekdaily.org/images/site-logo.png" width="200" height="200" alt="geek!daily logo" class="animated fadeInDown"></a>
      
      <h1 class="site-title animated fadeIn"><a href="http://blog.geekdaily.org/">geek!daily</a></h1>
		<h2 class="site-description animated fadeIn" itemprop="description">sporadic bursts of random thinking on life, leadership, and tech</h2>
	</div>
</header><!-- /.masthead -->

<div class="js-menu-screen menu-screen"></div>


<div id="main" role="main">
  <article class="hentry">
    
    <div class="entry-wrapper">
      <header class="entry-header">
        <span class="entry-tags"></span>
        
          <h1 class="entry-title">LiveBlog: 10+ Deploys A Day: Dev and Ops at Flickr</h1>
        
      </header>
      <footer class="entry-meta">
        
          
        
          <img src="http://blog.geekdaily.org/images/" class="bio-photo" alt=" bio photo"></a>
        
        <span class="author vcard">By <span class="fn"></span></span>
        <span class="entry-date date published"><time datetime="2009-06-23T13:47:46-07:00"><i class="fa fa-calendar-o"></i> June 23, 2009</time></span>
        
        
        
        
      </footer>
      <div class="entry-content">
        <p>Update 1: <a href="http://www.slideshare.net/jallspaw/10-deploys-per-day-dev-and-ops-cooperation-at-flickr">Slides are now on SlideShare.</a></p>

<p>Update 2: <a href="http://velocityconference.blip.tv/file/2284377">Video now available on blip.tv</a></p>

<p>John Allspaw (Ops) &amp; Paul Hammond (Eng), Twitter</p>

<p>“Actually work together and aren’t huge assholes to each other.”</p>

<p>(omitted: photo stats … that’s a lot of kittens)</p>

<p>Dev vs. Ops</p>

<ul>
  <li>It’s not my {machines,code} it’s your {code,machines}</li>
</ul>

<p>Spock v. Scottie analogy</p>

<p>Ops as grumpy old man, says no all the time, cycle of “no all the time because no one tells them anything because they say no all the time”</p>

<p>CW: dev job to add features, ops job to keep site stable and fast</p>

<p>Flickr: Ops job is to enable the business (Dev’s, too)</p>

<p>Business requires change, otherwise you’ll be overtaken by the new guy … but change is the root cause of most outages.</p>

<p>Discourage change vs. Allow it to happen as often as it needs to (via tools and culture)</p>

<p>Lowering the risk of change via tools and culture.</p>

<ul>
  <li>Increase confidence in change goodness</li>
  <li>Increase ability to react to those changes</li>
</ul>

<p>You need {ops,devs} who think like {dev,ops}</p>

<ol>
  <li>
    <p>Role and Config Mgmt</p>
  </li>
  <li>
    <p>Shared Version Control: everyone looks in the same place for everything</p>
  </li>
</ol>

<ul>
  <li>Code and config in same place</li>
  <li>Everyone has access—transparency</li>
  <li>Everyone knows how to use it</li>
</ul>

<p>3a. One-step build</p>

<ul>
  <li>Everything you need to do to convert svn co’d code into what goes to the site—one command</li>
  <li>They have “Perform Staging” button at bottom of a page with stats on latest commit</li>
</ul>

<p>3b. One-step deploy</p>

<ul>
  <li>Top of page is deploy log with notes: who, when, what (link to changes)</li>
  <li>Bottom has “I’m feeling lucky!” button to deploy</li>
  <li>Continuous deployment</li>
</ul>

<p>You can’t pretend to deploy 10 times a day if you go down 10 times a day. That’s not being agile, that’s being retarded.</p>

<p>They use Hudson to generate packages which can be deployed by ops</p>

<p>Small frequent changes make it easier to see what went wrong and recover when needed</p>

<ol>
  <li>[missed that tag]</li>
</ol>

<ul>
  <li>Branching is all about managing bugfixes</li>
  <li>Always ship trunk</li>
  <li>Branch in code instead: use conditionals to block out pre-release features and configure off/invis—provides an operational lever for adjustment</li>
  <li>Makes these open for private beta in production on production hdwe, etc.</li>
  <li>Allows dark launches, which allows you to size appropriately, fix major oversights, take the fear out of major new launches</li>
</ul>

<p>They have a couple hundred “free contingency switches” to turn things off/throttle things down. Gives broad operational control to minimize effects on the site.</p>

<p>Tend to fail forward using these and fix the problem.</p>

<ol>
  <li>Shared metrics</li>
</ol>

<ul>
  <li>You can see mine, I can see yours</li>
  <li>Use ganglia as console</li>
  <li>Devs know where dashboard is, and watch as obsessively as ops</li>
  <li>Includes app-level metrics (which exposes them to Ops)</li>
  <li>(helps drive accountability in both directions in the org—both can see and feel ownership)</li>
  <li>This begins to create opportunity to gracefully collaborate to back off an oversub’d resource/degrade/throttle as needed</li>
  <li>Show last site deploy info on every page/graph; you can corellate a change in the graph</li>
</ul>

<ol>
  <li>IRC and IM bots</li>
</ol>

<ul>
  <li>Heavy IRC users for ongoing dialog between dev/ops, remote/local</li>
  <li>Last.fm wrote a tool to inject events into IRC (monitoring, events, deployments, builds)</li>
  <li>Log it all and put it in a search engine</li>
</ul>

<p>Culture</p>

<p>All the tools in the world won’t help if you have a contentious culture</p>

<ol>
  <li>Respect</li>
</ol>

<ul>
  <li>No stereotypes: not all devs are lazy/cowboys, not all ops are obstructive</li>
  <li>respect their expertise and opinions <strong>and</strong> responsibilities (they influence priorities)</li>
  <li>Don’t just say “no”—it’s like saying “I don’t care about your problem/perspective”</li>
  <li>Best solutions are collaborative. Memcache is an excellent example; written to solve the problem of DB overheat, which impacted both</li>
  <li>Don’t hide things: share your solution even if you think they’ll say no; you deny their expertise and input</li>
</ul>

<p>Talk about the impact of your code push</p>

<ul>
  <li>What metrics change</li>
  <li>what are the risks</li>
  <li>what are the symptoms of somethign going wrong</li>
  <li>what are the contingencies (rollback)</li>
</ul>

<ol>
  <li>Trust</li>
</ol>

<ul>
  <li>When you walk up with all the above on hand, you demonstrate that you care enough about them and the business</li>
  <li>“I don’t want to tell X …” == you’re a cowboy, and “cowboys are losers”</li>
  <li>Have shared playbooks and contingency plans so all understand.</li>
  <li>Provide as many knobs and levers as you can so Ops can tweak to match the env</li>
  <li>Ops: be transparent, give devs insight and access to the systems. Playing telephone around shell commands is dumb.</li>
  <li>It’s hard to help if you can’t directly see</li>
</ul>

<ol>
  <li>Have a healthy attitude around failure—it’s going to happen.</li>
</ol>

<ul>
  <li>Think about how you’ll respond more than you think about how you’ll prevent it</li>
  <li>Would you rather be treated by a GP who deals with heart attacks infrequently or an EMT who handles them weekly?</li>
  <li>Fire drills: when ops and sr engineers are fixing a problem, have others diagnose live in parallel (but make no changes!)</li>
</ul>

<ol>
  <li>Avoiding blame</li>
</ol>

<ul>
  <li>they have a rule of no-finger-pointing; it doesn’t need enforcement, folks step up</li>
  <li>fixing blame wastes a ton of time, why not skip it? Feel guilty afterwards if you must.</li>
  <li>They’ve got a bit of a potlatch culture as people try to assert responsibility in order to fix things.</li>
  <li>Remember that when your code breaks, someone’s going to have to wake up to fix it. Own it and apologize, at least. Otherwise, you’re back to not respecting each other (“Screw you … aren’t you getting paid to do that?”)</li>
</ul>

<p>Ops should provide constructive, continual feedback on how it’s going. Point out interesting things before they’re critical</p>


        
      </div><!-- /.entry-content -->
    </div><!-- /.entry-wrapper -->
    <nav class="pagination" role="navigation">
      
        <a href="http://blog.geekdaily.org/2009/06/liveblog-qa-with-twitters-john-adams.html" class="btn" title="LiveBlog: Q&A with Twitter's John Adams">Previous</a>
      
      
        <a href="http://blog.geekdaily.org/2009/06/michael-jacksons-obit-via-wordle.html" class="btn" title="Michael Jackson's Obit via Wordle">Next</a>
      
    </nav><!-- /.pagination -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo" class="entry-wrapper">
    

<span>&copy; 2015 Jim Meyer. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="http://mademistakes.com/so-simple/" rel="nofollow">So Simple Theme</a>.</span>
<div class="social-icons">
	<a href="http://twitter.com/purp" title="Jim Meyer on Twitter" target="_blank"><i class="fa fa-twitter-square fa-2x"></i></a>
	
	
	<a href="http://linkedin.com/in/jimmeyer" title="Jim Meyer on LinkedIn" target="_blank"><i class="fa fa-linkedin-square fa-2x"></i></a>
	
	<a href="http://instagram.com/purp" title="Jim Meyer on Instagram" target="_blank"><i class="fa fa-instagram fa-2x"></i></a>
	<a href="http://www.flickr.com/photos/purp" title="Jim Meyer on Flickr" target="_blank"><i class="fa fa-flickr fa-2x"></i></a>
	<a href="http://github.com/purp" title="Jim Meyer on Github" target="_blank"><i class="fa fa-github-square fa-2x"></i></a>
	
	
  <a href="http://blog.geekdaily.org/feed.xml" title="Atom/RSS feed"><i class="fa fa-rss-square fa-2x"></i></a>
</div><!-- /.social-icons -->
  </footer>
</div><!-- /.footer-wrapper -->

<script type="text/javascript">
  var BASE_URL = 'http://blog.geekdaily.org';
</script>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://blog.geekdaily.org/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://blog.geekdaily.org/assets/js/scripts.min.js"></script>


<!-- Asynchronous Google Analytics snippet -->
<script>
  var _gaq = _gaq || [];
  var pluginUrl = 
 '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'UA-225723-36']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>



</body>
</html>
